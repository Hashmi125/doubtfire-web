<!-- Import Tailwind CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">

<h4>Step 1. Record and add up to 3 prompts.</h4>
<div [hidden]="!canRecord || isSending" class="flex justify-around items-center">
  <div>
    <button mat-icon-button aria-label="Record icon button" [disabled]="!canAddRecording" id='btnRecordPrompt'
      (click)="recordingToggle()" mat-icon-button aria-label="Record audio prompt">
      <span *ngIf="isRecording" class="material-icons">stop_rounded</span>
      <span *ngIf="!isRecording" class="material-icons">fiber_manual_record</span>
    </button>
  </div>

  <div class="audio-recorder">
    <p [hidden]="canRecord" class="text-center">Audio recording <br> only supported in modern versions of Chrome, Firefox and Safari.</p>
    <mat-spinner class="send-audio-spinner" [diameter]="72" [strokeWidth]="2" [hidden]="!isSending"></mat-spinner>
    <div class="flex justify-center items-center">
      <canvas #discussionPromptComposerCanvas class="discussion-prompt-audio-visualiser"></canvas>
    </div>
    <audio #discussionPromptComposerAudio></audio>
  </div>

  <div>
    <button mat-icon-button type="button" id='btnSave' (click)="saveRecording()"
      [disabled]="!recordingAvailable || !canAddRecording" class="btn-circle">
      <i class="fa fa-plus"></i>
    </button>
  </div>
</div>

<h4>Step 2. Optionally play back prompts.</h4>
<mat-action-list id="recordingList">
  <h3 mat-subheader>Discussion Prompts</h3>
  <ng-container *ngFor="let recording of recordings; let i = index">
    <button mat-list-item (click)="playRecording(getUrl(recording))">
      <mat-icon mat-list-icon>play_arrow_rounded</mat-icon>
      <h4 mat-line>Prompt {{ i + 1 }}</h4>
      <p mat-line> Click to play recording </p>
    </button>
  </ng-container>
</mat-action-list>

<h4>Step 3. Send.</h4>
<div class="flex justify-end items-center">
  <button mat-raised-button color="primary" type="button" mat-dialog-close
    (click)="sendRecording()" [hidden]="recordings.length === 0">
    Send
  </button>
</div>

<mat-divider class="my-12"></mat-divider>
